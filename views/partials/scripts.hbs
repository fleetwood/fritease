<script src="./../../scripts/OnRender.js"></script>
<script src="./../../scripts/FF5.js"></script>
<script src="./../../scripts/UIStream.js"></script>
<script src="./../../scripts/TweetStorm.js"></script>
<script src="./../../scripts/ProfileCard.js"></script>
<script src="./../../scripts/FF5-Dashboard.js"></script>
<script src="./../../scripts/friTease.js"></script>
<script>
    $(document).ready(() => {
        $('#dashboard-ff5').ff5Dashboard();

        $('#dashboard-ranked').uiStream({
            url: '/api/ui/userlist'
        }).getStream();

        $('#dashboard-simplelist').uiStream({
            url: '/api/ui/todolist'
        }).getStream();
        
        const tweetStorm = $('#Tweetstorm-dialog').tweetStorm({
            modalUrl: '/api/ui/modalContent',
            imageUrl: '/api/ui/modalImage',
            contentContainer: '#Tweetstorm-dialog-dialog',
            imageContainer: '#TweetAttachmentContainer',
            textForm: '#tweet-textarea',
            showButton: '#global-new-tweet-button',
            closeButton: '#modal-close-button'
        });

        $('#profile-hover-container').profileCard({
            url: '/api/ui/profileCard',
            selector: '.tweet-user-avatar'
        });

        FF5.init();

        $('body').on('click', '.SendTweetsButton',(e) => {
            $.ajax({
                url: '/api/postPrompt',
                type: 'GET',
                contentType: 'application/json',
                data: {
                    statusText: $('#tweet-textarea').val(),
                    imageUrl: $('#prompt-image').attr('src')
                },
                error: (err) => console.log(err.statusText),
                success: (result) => $(tweetStorm.selector.contentContainer).html(result)
            });
        })
    });
</script>